<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="{{ picocss_url }}">
    <title>PyPI Server</title>
    <style>
        :root {
            --pico-form-element-spacing-vertical: 0.35rem;
            --pico-form-element-spacing-horizontal: 0.75rem;
            --pico-font-size: 1rem;
        }
        .index-table th, td {
            text-align: right;
            border-bottom: none;
        }
        .index-table th:first-child, td:first-child {
            text-align: left;
        }
        .index-table td[data-tooltip] {
            border-bottom: none !important;
        }
        .myheader {
            padding: 0px;
            background-color: var(--pico-card-background-color);
        }
    </style>
</head>

<body>
    <header class="myheader">
        <nav class="container" aria-label="breadcrumb">
            <span style="font-weight: 800; font-size: x-large;">PyPI Server</span>
            <ul>
                <li><a style="margin-left:10px;" href="{{ root.href }}">/</a></li>
                {% if index.name %}<li><a href="{{ index.href }}">{{ index.name }}</a></li>{% endif %}
            </ul>
        </nav>
    </header>
    <main class="container">
        {%- if not index.name %}
        <h2>Indexes</h2>
        <table class="index-table">
            <thead>
                <tr>
                    <th scope="col">Index</th>
                    <th scope="col">Projects</th>
                    <th scope="col">Files</th>
                    <th scope="col">Total Size</th>
                    <th scope="col">Latest Upload</th>
                </tr>
            </thead>
            <tbody>
                {%- for name, stats in stats_per_index.items() %}
                <tr>
                    <th scope="row">{%if name %}<a href="{{ name }}/">{{ name }}</a>{% else %}(root){% endif %}</th>
                    <td>{{ stats.projects }}</td>
                    <td>{{ stats.files }}</td>
                    <td data-tooltip="{{ stats.total_size }} bytes">{{ stats.total_size | naturalsize }}</td>
                    <td data-tooltip="{{ stats.latest_upload }}">{{ stats.latest_upload | naturaltime }}</td>
                </tr>
                {%- endfor %}
            </tbody>
        </table>
        {%- endif %}
        <h2>Projects{% if index.name %} for {{ index.name }}{% endif %}</h2>
        <p>
            {{ index.stats.projects }} projects &#128313;
            {{ index.stats.files }} files &#128313;
            {{ index.stats.total_size | naturalsize }} &#128313;
            <span data-tooltip="Latest upload: {{ index.stats.latest_upload }}">{{ index.stats.latest_upload | naturaltime }}</span>
        </p>
        <ul>
            {%- for project in index.projects %}
            <li><a href="project/{{ project.name }}/">{{ project.name }}</a></li>
            {%- endfor %}
        </li>
    </main>
    <footer class="container">
        <p>Usage:</p>
        <pre style="padding:20px;">uv CMD --default-index={{ index.simple_api }} --native-tls</pre>
    </footer>
</body>

</html>
